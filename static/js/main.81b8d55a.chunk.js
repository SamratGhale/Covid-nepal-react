(this["webpackJsonpCovid-nepal-react"]=this["webpackJsonpCovid-nepal-react"]||[]).push([[0],{156:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(6),i=a.n(o),s=a(31),l=a.n(s),c=a(48),h=a(7),d=a(8),m=a(10),p=a(9),u=(a(58),a(11)),f=function(t){var e=t.chartData;t.month,t.week;return window.matchMedia("(max-width:767px)").matches?r.a.createElement("div",{className:"chart"},r.a.createElement(u.b,{data:e,height:350,options:{title:{display:"Apple",text:"Nepal's timeline",fontSize:25}}})):r.a.createElement("div",{className:"chart"},r.a.createElement(u.b,{data:e,options:{title:{display:"Apple",text:"Nepal's timeline",fontSize:25}}}))},g=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={chartData:n.props.chartData,month:t.month,week:t.week},n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(f,{chartData:this.props.chartData})}}]),a}(n.Component);g.defaultProps={displayTitle:!0,displayLegend:!0,legendPosition:"right"};var w=function(t){var e=t.chartData,a=t.displayTitle;return window.matchMedia("(max-width:767px)").matches?r.a.createElement("div",{className:"chart"},r.a.createElement(u.a,{data:e,width:100,height:100,options:{labels:!1,maintainAspectRatio:!0,title:{display:!0,text:a,fontSize:25}}})):r.a.createElement("div",{className:"chart"},r.a.createElement(u.a,{data:e,options:{maintainAspectRatio:!0,title:{display:!0,text:a,fontSize:25}}}))},v=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={chartData:t.chartData,displayTitle:t.displayTitle},n}return Object(d.a)(a,[{key:"render",value:function(){return r.a.createElement(w,{chartData:this.props.chartData,displayTitle:this.props.displayTitle})}}]),a}(n.Component);v.defaultProps={};var b=a(170),k=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))).state={loading:!0,week:JSON.parse(localStorage.getItem("week"))||0,month:JSON.parse(localStorage.getItem("month"))||0,data:null},t.previousMonth=function(){localStorage.setItem("month",JSON.stringify(2)),localStorage.setItem("week",JSON.stringify(0)),window.location.reload()},t.thisMonth=function(){localStorage.setItem("month",JSON.stringify(1)),localStorage.setItem("week",JSON.stringify(0)),window.location.reload()},t.thisWeek=function(){localStorage.setItem("month",JSON.stringify(0)),localStorage.setItem("week",JSON.stringify(1)),window.location.reload()},t.all=function(){localStorage.setItem("month",JSON.stringify(0)),localStorage.setItem("week",JSON.stringify(0)),window.location.reload()},t.lastWeek=function(){localStorage.setItem("month",JSON.stringify(0)),localStorage.setItem("week",JSON.stringify(2)),window.location.reload()},t.weekBeforeThat=function(){t.setState({week:3}),t.setState({month:0}),localStorage.setItem("month",JSON.stringify(0)),localStorage.setItem("week",JSON.stringify(3)),window.location.reload()},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=Object(c.a)(l.a.mark((function t(){var e,a,n,r,o,i,s,c,h,d,m,p,u,f,g,w,v,b,k,y=this;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="https://data.nepalcorona.info/api/v1/covid/timeline?format=json","https://api.covid19api.com/world",t.next=4,fetch("https://api.covid19api.com/world");case 4:return a=t.sent,t.next=7,fetch(e);case 7:return n=t.sent,t.next=10,n.json();case 10:return r=t.sent,t.next=13,a.json();case 13:o=t.sent,this.setState({data:r.slice(85,-1),dataWorld:o,loading:!1}),i=r.slice(0,-2),this.state.week?this.state.data=i.slice(-8-7*(this.state.week-1),-1-7*(this.state.week-1)):this.state.month&&(this.state.data=i.slice(-30-30*(this.state.month-1),-1-30*(this.state.month-1))),s=[],c=[],h=[],d=[],m=[],p=this.state.dataWorld.slice(-1),this.state.data.map((function(t){return t.index=y.state.data.indexOf(t)})),this.state.data.map((function(t){return s.push(t.date)})),this.state.data.map((function(t){return m.push(t.index)})),this.state.data.map((function(t){return c.push(t.newCases)})),this.state.data.map((function(t){return h.push(t.newDeaths)})),this.state.data.map((function(t){return d.push(t.newRecoveries)})),u=c,f=s,g=h,w=d,v=[],this.state.data.map((function(t){return v.push(t.totalRecoveries)})),b=[],this.state.data.map((function(t){return b.push(t.totalDeaths)})),k=[],this.state.data.map((function(t){return k.push(t.totalCases)})),this.setState({chartData3:{labels:["active cases","new recovered","new deaaths"],datasets:[{data:[p[0].TotalConfirmed-p[0].TotalRecovered-p[0].TotalDeaths,p[0].TotalRecovered,p[0].TotalDeaths],backgroundColor:["rgba(207,47,95)","rgba(193,232,0)","rgba( 26, 13, 0)"],hoverBackgroundColor:"rgba(220,232,144)",hoverBorderColor:"rgba(0,220,220,1)",borderWidth:2}]}}),this.setState({chartData2:{labels:["active cases","new recovered","new deaaths"],datasets:[{data:[k.slice(-1)-v.slice(-1)-b.slice(-1),v.slice(-1),b.slice(-1)],backgroundColor:["rgba(207,47,95)","rgba(193,232,0)","rgba( 26, 13, 0)"],hoverBackgroundColor:"rgba(220,232,144)",hoverBorderColor:"rgba(0,220,220,1)",borderWidth:2}]}}),this.setState({chartData:{labels:f,datasets:[{label:"new cases",data:u,backgroundColor:["rgba(207,47,95,0.6)"]},{label:"new recovered",data:w,backgroundColor:["rgba(193,232,0)"]},{label:"new deaths",data:g,backgroundColor:["rgba(0, 0, 0, 1)"]}]}});case 42:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.chartData),r.a.createElement("div",null,this.state.loading||!this.state.data?r.a.createElement("div",null," loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"rowC"},r.a.createElement("div",{className:"row1"},r.a.createElement(v,{chartData:this.state.chartData2,displayTitle:"Nepal's data"})),r.a.createElement("div",{className:"row2"},r.a.createElement(v,{chartData:this.state.chartData3,displayTitle:"World's data"}))),r.a.createElement(g,{chartData:this.state.chartData}),r.a.createElement("div",{className:"clicks"},r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.previousMonth},"previous month"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.thisMonth},"this month"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.thisWeek},"this week"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.lastWeek},"last week"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.weekBeforeThat},"week before that"),r.a.createElement(b.a,{variant:"contained",color:"primary",onClick:this.all},"all"))))}}]),a}(r.a.Component);i.a.render(r.a.createElement(k,null),document.getElementById("root"))},52:function(t,e,a){t.exports=a(156)},58:function(t,e,a){}},[[52,1,2]]]);
//# sourceMappingURL=main.81b8d55a.chunk.js.map